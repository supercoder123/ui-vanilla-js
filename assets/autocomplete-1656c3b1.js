import"./styles-fac82e35.js";class r{constructor(t,{placeholder:e,data:n,renderItem:o,matches:i,onItemClick:d}){this.inputElement=document.getElementById(t),this.inputElement.placeholder=e,this.addListeners(),this.focused=!1,this.data=n,this.searchTerm="",this.renderItem=o,this.matches=i,this.onItemClick=d,this.filteredList=[],this.attachDropdownToBody()}addListeners(){this.inputElement.addEventListener("input",this.onInput.bind(this)),this.inputElement.addEventListener("focus",this.onInputClick.bind(this)),this.inputElement.addEventListener("blur",this.onInputClick.bind(this))}attachDropdownToBody(){const{top:t,left:e,height:n}=this.inputElement.getBoundingClientRect();this.dropdown=document.createElement("ul"),this.dropdown.classList.add("autocomplete-dropdown"),this.dropdown.role="listbox",this.dropdown.style.width=this.inputElement.offsetWidth+"px",this.dropdown.style.top=t+n+"px",this.dropdown.style.left=e+"px",this.dropdown.addEventListener("mousedown",function(o){if(o.target.classList.contains("autocomplete-listitem")){const i=o.target.dataset.itemId;this.onItemClick(this.filteredList.at(+i),this.searchTerm)}}.bind(this)),this.dropdown.appendChild(this.createListItems(this.data)),this.inputElement.parentElement.insertBefore(this.dropdown,null),this.toggleDropdown(!1)}toggleDropdown(t){this.dropdown.hidden=!t}updateDropdown(){this.dropdown.innerHTML="",this.dropdown.appendChild(this.createListItems(this.matches(this.data,this.searchTerm))),this.toggleDropdown(!0)}createListItems(t){const e=document.createDocumentFragment();if(this.filteredList=t,!this.filteredList.length){const n=document.createElement("p");return n.innerText="No results",e.appendChild(n),e}return t.forEach((n,o)=>{const i=document.createElement("li");i.classList.add("autocomplete-listitem"),i.dataset.itemId=o,i.role="option",i.innerHTML=this.renderItem(n),i.firstElementChild.style.pointerEvents="none",e.appendChild(i)}),e}onInput(t){this.searchTerm=t.target.value,this.updateDropdown()}onInputClick(t){this.focused=t.type==="focus",this.toggleDropdown(this.focused)}}fetch("https://jsonplaceholder.typicode.com/users").then(s=>s.json()).then(s=>{new r("my-search-2",{data:s,placeholder:"Async search by name",matches:(t,e)=>t.filter(n=>n.name.toLowerCase().includes(e)),renderItem:t=>`
                <div class="user-list-item">
                    <span class="name">${t.name}</span>
                    <span class="username">Username: ${t.username}</span>
                </div>
            `,onItemClick:(t,e)=>{console.log(t),document.querySelector(".results").innerText=t.name}})});new r("my-search",{data:["Apple","Mango","Banana","Tomato","Orange"],placeholder:"Sync search",matches:(s,t)=>s.filter(e=>e.toLowerCase().includes(t)),renderItem:s=>`
            <div>${s}</div>
        `,onItemClick:(s,t)=>{console.log(s),document.querySelector(".results").innerText=s}});
