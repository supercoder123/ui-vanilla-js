import"./styles-fac82e35.js";function R(e,t){const n=document.getElementById("app");if(n){n.innerHTML="";const l=document.createDocumentFragment();n.style.gridTemplateRows=`repeat(${e}, 20px)`,n.style.gridTemplateColumns=`repeat(${t}, 20px)`;for(let o=0;o<e;o++)for(let L=0;L<t;L++){const w=document.createElement("div");w.className="tile",l.appendChild(w)}n.appendChild(l),n.focus()}return[Array(e).fill(0).map(()=>Array(t).fill(0)),n.children]}const i={ROWS:30,COLS:30},u={DRAW:1,BLANK:0,APPLE:-1};function h(e,t){return e*i.COLS+t}function P(e,t,n){return Array(n).fill([e,t])}function K(e){for(let t=0;t<i.ROWS;t++)for(let n=0;n<i.COLS;n++)e[t][n]=u.BLANK}let[c,S]=R(i.ROWS,i.COLS),r,g=-1,A=!1,s,d,y=0,m=10,f=0;const p=(e,t)=>[e+1,t],C=(e,t)=>[e-1,t],O=(e,t)=>[e,t-1],k=(e,t)=>[e,t+1];let a=p;document.addEventListener("keydown",e=>{switch(A||(D(),W()),e.code){case"KeyW":case"ArrowUp":a!==p&&(a=C);break;case"KeyS":case"ArrowDown":a!==C&&(a=p);break;case"KeyA":case"ArrowLeft":a!==k&&(a=O);break;case"KeyD":case"ArrowRight":a!==O&&(a=k);break}});function D(){let[e,t]=r[0],[n,l]=a(e,t);if(b(n,l)&&G(n,l)){for(let o=r.length-2;o>=0;o--)r[o+1]=r[o];r[0]=[n,l],n===s&&l===d&&([s,d]=E(),r.push([r[r.length-1][0],r[r.length-1][1]]),f+=10,document.getElementById("score").innerText=f.toString(),T(f))}else A=!0,window.cancelAnimationFrame(g);for(let o=0;o<r.length;o++)c[r[o][0]][r[o][1]]=u.DRAW;c[s][d]=u.APPLE}function T(e){e>100?m=30:e>50&&(m=20)}function W(){if(c)for(let e=0;e<i.ROWS;e++)for(let t=0;t<i.COLS;t++)S[h(e,t)].style.backgroundColor=c[e][t]===u.DRAW?"#845EC2":"white",c[e][t]===u.APPLE&&(S[h(s,d)].style.backgroundColor="red")}function E(){const e=Math.round(Math.random()*(i.ROWS-1)),t=Math.round(Math.random()*(i.COLS-1));return G(e,t)?[e,t]:E()}function b(e,t){return e<i.ROWS&&e>=0&&t>=0&&t<i.COLS}function G(e,t){for(let n=0;n<r.length;n++)if(r[n][0]===e&&r[n][1]===t)return!1;return!0}function B(){K(c),D(),W()}const I=e=>{g=window.requestAnimationFrame(I),!((e-y)/1e3<1/m)&&(y=e,B())};function M(){[c,S]=R(i.ROWS,i.COLS),r=P(5,6,3),[s,d]=E(),a=p,A=!1,g=window.requestAnimationFrame(I),f=0,m=10,document.getElementById("score").innerText=f.toString()}document.getElementById("new-game").addEventListener("click",()=>{M()});
