import"./styles-fac82e35.js";class c{constructor(i,l){this.root=document.getElementById(i),this.createFolderTree(this.root,l),this.root.addEventListener("click",r=>{const e=r.target;if(e.parentElement.tagName==="UL"&&e.tagName==="LI"&&!e.matches(".explorer__item--file")&&(e.querySelector(".explorer__item--folder").classList.toggle("folder-close"),e.parentElement.style.height?e.parentElement.style.removeProperty("height"):e.parentElement.style.height=e.clientHeight+"px"),e.matches("button.explorer__item-add-file")){const t=document.getElementById("add-file-template").content.cloneNode(!0).firstElementChild,f=Math.floor(Math.random()*100);t.dataset.fileId=f;const o=e.parentElement.parentElement,d=t.querySelector("input"),a=o.dataset.fileId;d.addEventListener("keydown",function m(n){(n.key==="Enter"||n.keyCode===13)&&(d.removeEventListener("keydown",m),t.innerHTML=n.target.value,this.addFile(+a,l,n.target.value,f))}.bind(this)),o.parentElement.insertBefore(t,o.nextElementSibling),d.focus({preventScroll:!0}),d.addEventListener("blur",function m(n){n.target.value.length||(d.removeEventListener("blur",m),t.remove())})}if(e.matches("button.explorer__item-add-folder")){const t=document.getElementById("add-folder-template").content.cloneNode(!0).firstElementChild,f=Math.floor(Math.random()*100);t.firstElementChild.dataset.fileId=f;const o=e.parentElement.parentElement,d=o.dataset.fileId,a=t.querySelector("input");a.addEventListener("keydown",function m(n){(n.key==="Enter"||n.keyCode===13)&&(a.removeEventListener("keydown",m),t.querySelector(".explorer__item--folder").innerHTML=n.target.value,this.addFolder(+d,l,n.target.value,f))}.bind(this)),o.parentElement.insertBefore(t,o.nextElementSibling),a.focus({preventScroll:!0}),a.addEventListener("blur",function m(n){n.target.value.length||(a.removeEventListener("blur",m),t.remove())})}})}createFolderTree(i,l){const r=document.getElementById("file-template"),e=document.getElementById("folder-template");l.forEach(s=>{if(s.isFolder){const t=e.content.cloneNode(!0).firstElementChild;t.firstElementChild.dataset.fileId=s.id,t.querySelector(".explorer__item--folder").innerText=s.name,i.appendChild(t),this.createFolderTree(t,s.items)}else{const t=r.content.cloneNode(!0).firstElementChild;t.dataset.fileId=s.id,t.innerText=s.name,i.appendChild(t)}})}getFile(i,l){let r=null;for(let e=0;e<l.length;e++){if(l[e].id===i)return l[e];l[e].isFolder&&(r=this.getFile(i,l[e].items))}return r}addFile(i,l,r,e){this.getFile(i,l).items.push({id:e,name:r,isFolder:!1,items:[]}),localStorage.setItem("files",JSON.stringify(l))}addFolder(i,l,r,e){this.getFile(i,l).items.push({id:e,name:r,isFolder:!0,items:[]}),localStorage.setItem("files",JSON.stringify(l))}}const p={files:[{id:1,name:"src",isFolder:!0,items:[{id:11,name:"index.js",isFolder:!1,items:[]},{id:2,name:"assets",isFolder:!0,items:[{id:3,name:"img.png",isFolder:!1,items:[]},{id:4,name:"test.jpg",isFolder:!1,items:[]},{id:5,name:"index.svg",isFolder:!1,items:[]}]},{id:7,name:"components",isFolder:!0,items:[{id:8,name:"App",isFolder:!0,items:[{id:9,name:"App.tsx",isFolder:!1,items:[]},{id:10,name:"styles.scss",isFolder:!1,items:[]}]}]},{id:12,name:"index.ts",isFolder:!1,items:[]}]},{id:6,name:"index.html",isFolder:!1,items:[]}]};new c("file-explorer",JSON.parse(localStorage.getItem("files"))||p.files);
