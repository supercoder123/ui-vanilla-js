import"./styles-fac82e35.js";class l{constructor(e,{placeholder:t,data:n,renderItem:r,matches:i,onItemClick:o}){this.inputElement=document.getElementById(e),this.inputElement.placeholder=t,this.focused=!1,this.data=n,this.searchTerm="",this.renderItem=r,this.matches=i,this.onItemClick=o,this.filteredList=[],this.filteredListElements=[],this.currentSelectedListElement=null,this.attachDropdownToBody(),this.addListeners()}addListeners(){this.inputElement.addEventListener("input",this.onInput.bind(this)),this.inputElement.addEventListener("focus",this.onInputClick.bind(this)),this.inputElement.addEventListener("blur",this.onInputClick.bind(this)),this.inputElement.addEventListener("keydown",e=>{var t;this.filteredList.length&&((e.key==="ArrowDown"||e.keyCode===40)&&(this.currentSelectedListElement=this.currentSelectedListElement?this.currentSelectedListElement.nextElementSibling||this.currentSelectedListElement:this.filteredListElements[0],(t=this.currentSelectedListElement.previousElementSibling)==null||t.removeAttribute("item-selected"),this.currentSelectedListElement.setAttribute("item-selected","true"),this.currentSelectedListElement.scrollIntoView({block:"end"})),(e.key==="ArrowUp"||e.keyCode===38)&&(this.currentSelectedListElement.removeAttribute("item-selected"),this.currentSelectedListElement=this.currentSelectedListElement.previousElementSibling||this.currentSelectedListElement,this.currentSelectedListElement.setAttribute("item-selected","true"),this.currentSelectedListElement.scrollIntoView({block:"end"})),(e.key==="Enter"||e.keyCode===13)&&this.onItemClick(this.filteredList[this.currentSelectedListElement.dataset.itemId],this.searchTerm))})}attachDropdownToBody(){const{top:e,left:t,height:n}=this.inputElement.getBoundingClientRect();this.dropdown=document.createElement("ul"),this.dropdown.classList.add("autocomplete-dropdown"),this.dropdown.role="listbox",this.dropdown.style.width=this.inputElement.offsetWidth+"px",this.dropdown.style.top=e+n+"px",this.dropdown.style.left=t+"px",this.dropdown.addEventListener("mousedown",function(r){if(r.target.classList.contains("autocomplete-listitem")){const i=r.target.dataset.itemId;this.onItemClick(this.filteredList[+i],this.searchTerm)}}.bind(this)),this.dropdown.appendChild(this.createListItems(this.data)),this.inputElement.parentElement.insertBefore(this.dropdown,null),this.toggleDropdown(!1)}toggleDropdown(e){this.dropdown.hidden=!e}updateDropdown(){this.dropdown.innerHTML="",this.dropdown.appendChild(this.createListItems(this.matches(this.data,this.searchTerm))),this.toggleDropdown(!0)}createListItems(e){const t=document.createDocumentFragment();if(this.filteredList=e,this.filteredListElements=[],this.currentSelectedListElement=null,!this.filteredList.length){const n=document.createElement("p");return n.innerText="No results",t.appendChild(n),t}return e.forEach((n,r)=>{const i=document.createElement("li");i.classList.add("autocomplete-listitem"),i.dataset.itemId=r,i.role="option",i.innerHTML=this.renderItem(n),i.firstElementChild.style.pointerEvents="none",this.filteredListElements.push(i),t.appendChild(i)}),t}onInput(e){this.searchTerm=e.target.value,this.updateDropdown()}onInputClick(e){this.focused=e.type==="focus",this.toggleDropdown(this.focused)}}fetch("https://jsonplaceholder.typicode.com/users").then(s=>s.json()).then(s=>{new l("my-search-2",{data:s,placeholder:"Search by name",matches:(e,t)=>e.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),renderItem:e=>`
                <div class="user-list-item">
                    <span class="name">${e.name}</span>
                    <span class="username">Username: ${e.username}</span>
                </div>
            `,onItemClick:(e,t)=>{console.log(e),document.querySelector(".results").innerText=e.name}})});new l("my-search",{data:["Apple","Mango","Banana","Tomato","Orange"],placeholder:"Search Fruits",matches:(s,e)=>s.filter(t=>t.toLowerCase().includes(e.toLowerCase())),renderItem:s=>`
            <div>${s}</div>
        `,onItemClick:(s,e)=>{console.log(s),document.querySelector(".results").innerText=s}});
